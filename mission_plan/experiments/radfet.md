RadFET Description
===

RadFET description can be found in BSc Theses of @ggajoch and @mgumiela.
{F4941}

RadFET Experiment
===

The experiment is turned on by issuing proper telecommand:

* Parameters: `delay [decasecond] (uint8_t), qty_of_samples (uint8_t), filename`
* Response: `ACK`

IMPORTANT: Unit of `delay` parameter is a `decasecond`.  `1 decasecond = 10 seconds`

The command triggers on-board commands sequence:

* Terminate current experiment

* prepare file for experiment daa
* Turn on PLD board (`eps enable_lcl SENS `)
* Wait `3 s`
* Turn RadFET ON (`RadFET On` - a command to PLD board - see [[pld/i2c_icd | PLD ICD]])
* Read [[pld/i2c_icd | RadFET registers]] and save to file

* Wait for time defined in `delay` parameter and do nothing

* Get `qty_of_samples` measurements (in a loop):
  * issue command `RadFET_Measure` - a command to PLD board
  * read [[pld/i2c_icd | RadFET registers]] and save to files
  * issue command `Measure all temperatures` to PLD board
  * read `supply` temperature and `sads`  from PLD and save to file

* Turn RadFET OFF (a command to PLD board)
* Read [[pld/i2c_icd | RadFET registers]] and save to file
* Turn OFF PLD board (`EPS SENS LCL disable`)
* Return to Survival Mode

All data are stored in memory. Next, the data can be downloaded on demand.

Memory consumption
---
One sample data packet size
---

| **no.** | **Field name** | **Byte length** |
| 1 | Radfet status | 1 |
| 2 | RadFET Temperature | 4 |
| 3 | Vth-1 | 4 |
| 4 | Vth-2 | 4 |
| 5 | Vth-3 | 4 |
| 6 | SADS temperature | 2 |
| 7 | Supply temperature | 2 |
|   | **Sum** | **21** |


Data space in total
---

**Max. amount of data generated by single telecommand from the Earth**
It's possible to request 255 samples at maximum. 

21 bytes * 255 samples + 2 bytes (registered after turn on and turn off of RadFET) = `5357 bytes`


Timing of the experiment
---

**Max. duration of the experiment**

255 * 10 s of delay + 30 s per sample * 255 = 10200 s = 2.84 h

Power consumption
---
Refer to PLD documentation. [To Be Done]

